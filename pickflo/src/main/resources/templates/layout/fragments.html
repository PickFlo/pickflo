<!DOCTYPE html>
<html>
<head>
	<th:block th:fragment="documentHeader">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>PICKFLO</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	</th:block>
</head>
<body>
	<th:block th:fragment="userHeader">
		<header class="header-container">
			<div id="logo">
		<a href="/pickflo/home" class="home-link">
			<h1>PICKFLO</h1>
		</a>
	</div>
	<div class="header">
		<div class="nickname" th:text="${user.nickname} + '님'"></div>
		<!-- 메뉴 텍스트 버튼 -->
		<button class="menu-text" onclick="toggleMenu()">
			<i class="bi bi-person-lines-fill" style="font-size: 2rem; color: white;"></i>
		</button>
		<div class="dropdown-menu" id="menu">
			<a href="/pickflo/favorite">찜한 영화</a>
			<a href="/pickflo/user/logout">로그아웃</a>
		</div>
	</div>
		</header>
	</th:block>

	<th:block th:fragment="footerContents">
		<footer class="footerContents">
			<div class="container">
				<p>&copy; 2024 PickFlo. All rights reserved.</p>
			</div>
		</footer>
	</th:block>

	<th:block th:fragment="bootstrapJS">
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"></script>
	</th:block>

	<th:block th:fragment="userHeaderJS">
		<script>
			function toggleMenu() {
				var menu = document.getElementById("menu");
				if (menu.style.display === "block") {
					menu.style.display = "none";
				} else {
					menu.style.display = "block";
				}
			}

			// 클릭 외부 이벤트로 메뉴 숨기기
			document.addEventListener('click', function(event) {
				var isClickInside = document.querySelector('.header').contains(
						event.target);
				var menu = document.getElementById("menu");

				if (!isClickInside) {
					menu.style.display = 'none';
				}
			});
		</script>
	</th:block>

</body>
</html>